import{_ as e,e as r}from"./app.6f02f33f.js";const a={},t=r(`<h2 id="spring" tabindex="-1"><a class="header-anchor" href="#spring" aria-hidden="true">#</a> Spring</h2><h3 id="spring-mvc" tabindex="-1"><a class="header-anchor" href="#spring-mvc" aria-hidden="true">#</a> Spring MVC</h3><h4 id="\u5173\u4E8E-interceptor-\u548C-filter" tabindex="-1"><a class="header-anchor" href="#\u5173\u4E8E-interceptor-\u548C-filter" aria-hidden="true">#</a> \u5173\u4E8E Interceptor \u548C Filter</h4><p>\u5F15\u7528\u81EAStackOverflow\uFF1A</p><blockquote><p>fine-grained handler-related preprocessing tasks are candidates for HandlerInterceptor implementations, especially factored-out common handler code and authorization checks. On the other hand, a Filter is well-suited for request content and view content handling, like multipart forms and GZIP compression. This typically shows when one needs to map the filter to certain content types (e.g. images), or to all requests.</p></blockquote><p>\u6240\u4EE5\u6765\u8BF4\uFF0C\u505A\u9A8C\u8BC1\u7801\u6821\u9A8C\u7684\u903B\u8F91\uFF0C\u5E94\u8BE5\u662F\u7528 Interceptor \u66F4\u4E3A\u5408\u9002\u3002But \u7531\u4E8E Filter \u5728 Interceptor \u4E4B\u524D\u6267\u884C\uFF08\u4F18\u5148\u7EA7\u9AD8\uFF0C\u66F4\u5E95\u5C42\uFF09\uFF0C\u7528 Interceptor \u65E0\u6CD5\u62E6\u622A\u5230\u975E\u6CD5\u767B\u5F55\u8BF7\u6C42\uFF0C\u8FD8\u662F\u8981\u7528 Filter\u3002</p><ul><li>Filters are called by your Server(tomcat). while Interceptors are called by Spring.</li><li>filter is always executed BEFORE the preHandle interceptor method. <ul><li>interceptors are part of Spring MVC which begins at DispatcherServlet. Filters are called before servlets.</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/wildcloud3/image_bed@master/2022/04/upgit_20220403_1648992562.png" alt="upload successful"></p><ul><li>\u6700\u540E\u7528\u4E86 httpSecurity \u7684 addFilterBefore \u5728\u7528\u6237\u540D\u5BC6\u7801\u9A8C\u8BC1\u524D\u52A0\u4E86\u4E2A GeetestFilter</li></ul><h3 id="spring-boot" tabindex="-1"><a class="header-anchor" href="#spring-boot" aria-hidden="true">#</a> Spring Boot</h3><h4 id="\u73AF\u5883\u53D8\u91CF\u83B7\u53D6\u7684-hack-\u903B\u8F91-springboot-2-\u4E2D\u53D8\u5316\u4E86\u5F88\u591A-\u4F46\u8FD8\u662F\u652F\u6301\u7684" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u53D8\u91CF\u83B7\u53D6\u7684-hack-\u903B\u8F91-springboot-2-\u4E2D\u53D8\u5316\u4E86\u5F88\u591A-\u4F46\u8FD8\u662F\u652F\u6301\u7684" aria-hidden="true">#</a> \u73AF\u5883\u53D8\u91CF\u83B7\u53D6\u7684 hack \u903B\u8F91\uFF08SpringBoot 2 \u4E2D\u53D8\u5316\u4E86\u5F88\u591A\uFF0C\u4F46\u8FD8\u662F\u652F\u6301\u7684\uFF09</h4><ul><li>\u5728 properties\u6587\u4EF6\u4E2D\u4E00\u822C\u662F a.b.c\uFF0C\u4F46\u5728\u73AF\u5883\u53D8\u91CF\u4E2D\uFF0CA_B_C \u4E5F\u662F\u53EF\u4EE5\u88AB DataBinder \u5230\u7684\uFF0C\u4EE3\u7801\u89C1\uFF1ARelaxedDataBinder::getPropertyValuesForNamePrefix\uFF0C\u4F1A\u5904\u7406<code>_ \u548C .</code>\u7684\u5206\u9694\u7B26</li><li>\u5927\u5C0F\u5199\u53D8\u6362\u7684\u903B\u8F91\uFF0C\u5728\u8FD9\u4E2A\u7C7B\uFF1ARelaxedNames</li></ul><h4 id="\u8FD0\u884C\u65F6\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u884C\u65F6\u914D\u7F6E" aria-hidden="true">#</a> \u8FD0\u884C\u65F6\u914D\u7F6E</h4><ol><li>\u51C6\u5907\u591A\u4E2A application-dev.properties, application-prod.properties\uFF0C\u53EF\u4EE5\u7528 spring.profiles.active=xxx \u6765\u6FC0\u6D3B</li><li>\u90E8\u7F72\u65F6\uFF0C\u6839\u636E\u4F18\u5148\u7EA7\uFF0C\u5728 java -jar -Dspring.profiles.active=prod \u6765\u6FC0\u6D3B</li><li>\u6709 Apollo\uFF0CSpring Cloud Bus\uFF0C\u5E94\u8BE5\u662F\u7528\u4E0D\u5230\u8FD9\u4E2A\u4E86</li></ol><h4 id="restcontroller-\u5BF9\u4E8E-response-\u7684-pojo-\u4F1A\u81EA\u52A8\u7528-jackson-\u641E\u6210json-\u8FD9\u65F6\u65F6\u95F4\u7C7B\u578B\u7684\u5E8F\u5217\u5316\u4F1A\u662F\u4E2A\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#restcontroller-\u5BF9\u4E8E-response-\u7684-pojo-\u4F1A\u81EA\u52A8\u7528-jackson-\u641E\u6210json-\u8FD9\u65F6\u65F6\u95F4\u7C7B\u578B\u7684\u5E8F\u5217\u5316\u4F1A\u662F\u4E2A\u95EE\u9898" aria-hidden="true">#</a> @RestController \u5BF9\u4E8E response \u7684 POJO \u4F1A\u81EA\u52A8\u7528 Jackson \u641E\u6210json\uFF0C\u8FD9\u65F6\u65F6\u95F4\u7C7B\u578B\u7684\u5E8F\u5217\u5316\u4F1A\u662F\u4E2A\u95EE\u9898</h4><ul><li>Java8 \u4E4B\u524D\uFF0CDate \u7C7B\u578B\uFF0C\u76F4\u63A5\u5728\u6CE8\u89E3\u4E0A <code>@JsonFormat(pattern = &#39;yyyy-MM-dd&#39;)</code></li><li>Java8 \u4E4B\u540E\uFF0CLocalDate \u76F8\u5173\u7C7B\u578B\uFF0C\u53EA\u4E0A\u9762\u4E0D\u591F\uFF0C\u9700\u8981\u5F15\u5165\u65B0\u7684\u4F9D\u8D56</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;
    &lt;version&gt;2.8.8&lt;/version&gt;
 &lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>\u5B9E\u73B0\u673A\u5236\uFF1A</li></ul><ol><li>\u5BF9\u4E8E\u4E0D\u6307\u5B9A\u7684 POJO \u8FD4\u56DE\uFF0C\u4F1A\u9ED8\u8BA4\u8C03\u7528\u5230 Jackson \u7684 ObjectWriter</li><li>\u4F1A resolve \u5230\u76F8\u5E94\u7684 ValueSerializer</li><li>\u7B2C\u4E00\u6B21\u8BBF\u95EE\u5230\u8FD9\u4E2A\u65F6\uFF0CBeanSerializerBase\u8FD9\u4E2A\u4F1A\u6784\u9020\uFF08Lazy \u7684\uFF09</li><li>\u91CC\u9762\u7684 BeanPropertyWriter \u91CC\u9762\u6709\u4E2A_member \u5C31\u662F\u5BF9\u5E94\u7684\u7C7B\u53CD\u5C04\u6570\u636E</li><li>\u53EF\u4EE5\u6839\u636E_member \u4E0A\u7684 Annotation \u6765\u6784\u9020\u76F8\u5E94\u7684 Formatter</li></ol><h4 id="propertysources-\u76F8\u5173" tabindex="-1"><a class="header-anchor" href="#propertysources-\u76F8\u5173" aria-hidden="true">#</a> PropertySources \u76F8\u5173</h4><ul><li>\u5728 populate Bean \u65F6\uFF0C\u5BF9\u4E8E<code>@Value</code>\u7684 field\uFF0C\u4F1A\u5C1D\u8BD5\u5404\u79CD resolver\uFF0C\u5230\u6700\u540E\uFF0C\u4F1A\u843D\u5230\u4E00\u5806 propertySouces \u4E0A\uFF0CGenrally\uFF0C\u8D8A\u540E\u88AB\u5B9A\u4E49\u5230\u7684@PropertySources\uFF0C\u4F1A\u8D8A\u5148win</li><li>\u4E00\u4E2A\u5C0F\u95EE\u9898\uFF0C\u4F7F\u7528 app.setDefaultProperties \u5F97\u5230\u7684 propertySource \u662F\u6700\u4F4E\uFF08\u6700\u5148\u5B9A\u4E49\uFF09Priority \u7684 PropertySource\uFF0C\u4F1A\u88AB\u4ECE config-bus \u90A3\u8FB9\u7684 CompositePropertySource \u8986\u76D6\u6389</li><li>\u8F6C\u800C\u8BBE\u7F6E property \u5728 env \u4E2D\uFF0C\u4F1A\u7528\u5230 EnvironmentPropertySource \u5C31\u53EF\u4EE5\u4E86</li></ul><h4 id="\u5982\u4F55\u4F18\u96C5\u5730\u7528-factory-strategy\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u4F18\u96C5\u5730\u7528-factory-strategy\u6A21\u5F0F" aria-hidden="true">#</a> \u5982\u4F55\u4F18\u96C5\u5730\u7528 factory strategy\u6A21\u5F0F</h4><ol><li>\u81EA\u5DF1\u5B9A\u4E49\u4E00\u4E2A annotation on runtime</li><li>\u7ED9\u5404\u4E2A handler/strategy/impl \u4E0A\u52A0\u8FD9\u4E2A annotation\uFF0C\u5E76\u6307\u5B9A\u597D\u5404\u81EA\u4E0D\u540C\u7684type/value/sort \u7B49</li><li>\u52A0\u4E00\u4E2A BeanFactoryPostProcessor \u7684\u5B9E\u73B0\uFF0C\u5728beanFactory \u521D\u59CB\u5316\u5B8C\u6210\u540E\uFF0C\u626B\u63CF\u6307\u5B9A\u5305\u4E0B\u542B\u6709\u6B64 annotation \u7684 class</li><li>\u63D0\u53D6\u6B64 annotation \u4E2D\u7684 value\uFF0C\u548C\u5BF9\u5E94\u7684 class \u7684 impl\u505A\u6210\u4E00\u4E2A map\uFF0C\u53EF\u4EE5\u5728 factory \u4E2D\u4F7F\u7528</li></ol><ul><li>\u5982\u679C\u4F7F\u7528 <code>@Autowired SomeInterface handlers[]</code> \u8FD9\u6837\u7684\u65B9\u5F0F\uFF0C\u4E00\u5B9A\u8981\u7ED9\u6240\u6709\u7684 impl \u5F04\u6210bean\uFF0C\u4F1A\u9700\u8981\u591A\u8003\u8651\u4E00\u4E9B\u7EBF\u7A0B\u95EE\u9898</li></ul>`,24);function i(l,o){return t}var s=e(a,[["render",i],["__file","Spring.html.vue"]]);export{s as default};
